define("tiny_cursive/cursive_writing_reports",["jquery","core/ajax","core/str","core/templates","./replay","./analytic_button","./analytic_events"],(function($,AJAX,str,templates,Replay,analyticButton,customEvents){const replayInstances={};window.video_playback=function(mid,filepath){if(""!==filepath){const replay=new Replay(elementId="content"+mid,filePath=filepath,speed=10,loop=!1,controllerId="player_"+mid);replayInstances[mid]=replay}else alert("No submission");return!1};var usersTable={init:function(page){str.get_strings([{key:"field_require",component:"tiny_cursive"}]).done((function(){$(document).ready((function($){let myEvents=new customEvents;$(".analytic-modal").each((function(){var mid=$(this).data("id"),filepath=$(this).data("filepath");let context={userid:mid},cmid=$(this).data("cmid");$(this).html(analyticButton($(this).data("id"))),$(this).on("click",(function(){AJAX.call([{methodname:"cursive_get_writing_statistics",args:{cmid:cmid,fileid:mid}}])[0].done((response=>{let data=JSON.parse(response.data);context.formattime=usersTable.formatTime(data.total_time_seconds),context.tabledata=data})).fail((error=>{throw new Error("Error: "+error.message)}))})),myEvents.createModal(mid,context),myEvents.analytics(mid,templates,context),myEvents.checkDiff(mid,mid),myEvents.replyWriting(mid,filepath)}))})),usersTable.getusers(page)}))},formatTime:function(totalSeconds){const hours=Math.floor(totalSeconds/3600),minutes=Math.floor(totalSeconds%3600/60),seconds=totalSeconds%60;return"".concat(hours,"h ").concat(minutes,"m ").concat(seconds,"s")},getusers:function(page){$("#id_coursename").change((function(){var courseid=$(this).val();AJAX.call([{methodname:"cursive_get_user_list",args:{courseid:courseid}}])[0].done((function(json){var context={tabledata:JSON.parse(json),page:page};templates.render("tiny_cursive/user_list",context).then((function(html){$("#id_username").html(html)}))})),AJAX.call([{methodname:"cursive_get_module_list",args:{courseid:courseid}}])[0].done((function(json){var context={tabledata:JSON.parse(json),page:page};templates.render("tiny_cursive/module_list",context).then((function(html){$("#id_modulename").html(html)}))}))}))}};return usersTable}));

//# sourceMappingURL=cursive_writing_reports.min.js.map