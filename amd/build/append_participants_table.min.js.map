{"version":3,"file":"append_participants_table.min.js","sources":["../src/append_participants_table.js"],"sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * @module     tiny_cursive/append_participants_table\n * @category TinyMCE Editor\n * @copyright  CTI <info@cursivetechnology.com>\n * @author kuldeep singh <mca.kuldeep.sekhon@gmail.com>\n */\n\ndefine([\"jquery\", \"core/config\", \"core/str\"], function ($, mdlcfg, Str) {\n    var usersTable = {\n        init: async function(page) {\n            await usersTable.appendTable(page);\n        },\n        appendTable: async function () {\n            $(document).ready(async function ($) {\n                let h_tr = $('thead').find('tr').get()[0];\n                let bodyid = $('body').attr('class');\n                let classes = bodyid.split(' ');\n                let courseid = parseInt(classes.find((classname) => {\n                    return classname.startsWith('course-');\n                }).split('-')[1]);\n\n                let statsString = await Str.get_string('stats', 'tiny_cursive');\n\n                $(h_tr).find('th').eq(6).after('<th>' + statsString + '</th>');\n                $('tbody').find(\"tr\").get().forEach(function (tr) {\n                    let td_user = $(tr).find(\"td\").get()[0];\n                    let userid = $(td_user).find(\"input\").get()[0]?.id;\n                    userid = userid?.slice(4);\n\n                    var color = 'font-size:24px;color:black ;text-decoration : none';\n                    let link = mdlcfg.wwwroot + \"/lib/editor/tiny/plugins/cursive/writing_report.php?userid=\"\n                        + userid + \"&courseid=\" + courseid;\n                    var icon = 'fa fa-area-chart';\n                    let thunder_icon = '<td><a href=\"' + link + '\" data-id=' + userid + '' + '>' +\n                        '<i class=\"' + icon + '\" aria-hidden=\"true\" style=\"' + color + '\"></a></td>';\n                    $(tr).find('td').eq(5).after(thunder_icon);\n                });\n\n                $(\".page-item ,.header \").on('click', function () {\n                    setTimeout(() => {\n                        usersTable.init();\n                    }, 1800);\n                });\n            });\n        }\n    };\n    return usersTable;\n});\n"],"names":["define","$","mdlcfg","Str","usersTable","init","async","page","appendTable","document","ready","h_tr","find","get","classes","attr","split","courseid","parseInt","classname","startsWith","statsString","get_string","eq","after","forEach","tr","td_user","userid","_$$find$get$","id","_userid","slice","thunder_icon","wwwroot","on","setTimeout"],"mappings":"AAsBAA,gDAAO,CAAC,SAAU,cAAe,aAAa,SAAUC,EAAGC,OAAQC,SAC3DC,WAAa,CACbC,KAAMC,eAAeC,YACXH,WAAWI,YAAYD,OAEjCC,YAAaF,iBACTL,EAAEQ,UAAUC,OAAMJ,eAAgBL,OAC1BU,KAAOV,EAAE,SAASW,KAAK,MAAMC,MAAM,GAEnCC,QADSb,EAAE,QAAQc,KAAK,SACPC,MAAM,KACvBC,SAAWC,SAASJ,QAAQF,MAAMO,WAC3BA,UAAUC,WAAW,aAC7BJ,MAAM,KAAK,IAEVK,kBAAoBlB,IAAImB,WAAW,QAAS,gBAEhDrB,EAAEU,MAAMC,KAAK,MAAMW,GAAG,GAAGC,MAAM,OAASH,YAAc,SACtDpB,EAAE,SAASW,KAAK,MAAMC,MAAMY,SAAQ,SAAUC,iCACtCC,QAAU1B,EAAEyB,IAAId,KAAK,MAAMC,MAAM,GACjCe,4BAAS3B,EAAE0B,SAASf,KAAK,SAASC,MAAM,kCAA/BgB,aAAmCC,GAChDF,uBAASA,iCAAAG,QAAQC,MAAM,OAMnBC,aAAe,iBAHR/B,OAAOgC,QAAU,8DACtBN,OAAS,aAAeX,UAEc,aAAeW,OAAxC,uHAEnB3B,EAAEyB,IAAId,KAAK,MAAMW,GAAG,GAAGC,MAAMS,iBAGjChC,EAAE,wBAAwBkC,GAAG,SAAS,WAClCC,YAAW,KACPhC,WAAWC,SACZ,qBAKZD"}