{"version":3,"file":"cursive_writing_reports.min.js","sources":["../src/cursive_writing_reports.js"],"sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * @module     tiny_cursive/cursive_writing_reports\n * @category TinyMCE Editor\n * @copyright  CTI <info@cursivetechnology.com>\n * @author kuldeep singh <mca.kuldeep.sekhon@gmail.com>\n */\n\ndefine([\"jquery\", \"core/ajax\", \"core/str\", \"core/templates\", \"./replay\"], function (\n    $,\n    AJAX,\n    str,\n    templates,\n    Replay\n) {\n    const replayInstances = {};\n    var usersTable = {\n        init: function (page) {\n            str\n                .get_strings([\n                    {key: \"field_require\", component: \"tiny_cursive\"},\n                ])\n                .done(function () {\n                    $(document).ready(function ($) {\n                        $(\".popup_item\").on('click', function () {\n                            var mid = $(this).data(\"id\");\n                            $(\"#\" + mid).show();\n                        });\n                        $(\".link_icon\").on('click', function () {\n                            var smid = $(this).data(\"id\");\n                            $(\"#\" + smid).show();\n                           \n                        });\n\n                        $(\".video_playback_icon\").on('click', function () {\n\n                            var mid = $(this).data(\"id\");\n                            var filepath = $(this).data(\"filepath\");\n                            if(filepath){\n                            $(\"#\" + mid).show();\n                            const replay = new Replay(\n                                elementId = 'output_'+mid,\n                                filePath = decodeURIComponent(filepath),\n                                speed = 10,\n                                loop = false,\n                                controllerId = 'player_' + mid\n                            );\n                            replayInstances[mid] = replay;\n                            } else {\n                                alert(\"File not found\");\n                            }\n                        });\n                        $(\".modal-close \").on('click', function () {\n                            $(\".modal\").hide();\n                            var mid = $(this).data(\"id\");\n                            if (replayInstances[mid]) {\n                                replayInstances[mid].stopReplay();\n                                delete replayInstances[mid];  // Clean up the instance\n                            }\n                        });\n                    });\n                    usersTable.getusers(page);\n                });\n        },\n\n        getusers: function (page) {\n            $(\"#id_coursename\").change(function () {\n                var courseid = $(this).val();\n                var promise1 = AJAX.call([\n                    {\n                        methodname: \"cursive_get_user_list\",\n                        args: {\n                            courseid: courseid,\n                        },\n                    },\n                ]);\n                promise1[0].done(function (json) {\n                    var data = JSON.parse(json);\n                    var context = {\n                        tabledata: data,\n                        page: page,\n                    };\n                    templates\n                        .render(\"tiny_cursive/user_list\", context)\n                        .then(function (html) {\n                           \n                            var filtered_user = $(\"#id_username\");\n                            filtered_user.html(html);\n                        });\n                });\n\n                var promise2 = AJAX.call([\n                    {\n                        methodname: \"cursive_get_module_list\",\n                        args: {\n                            courseid: courseid,\n                        },\n                    },\n                ]);\n                promise2[0].done(function (json) {\n                    var data = JSON.parse(json);\n                    var context = {\n                        tabledata: data,\n                        page: page,\n                    };\n                    templates\n                        .render(\"tiny_cursive/module_list\", context)\n                        .then(function (html) {\n                        \n                            var filtered_user = $(\"#id_modulename\");\n                            filtered_user.html(html);\n                        });\n                });\n            });\n        },\n    };\n    return usersTable;\n});\n"],"names":["define","$","AJAX","str","templates","Replay","replayInstances","usersTable","init","page","get_strings","key","component","done","document","ready","on","mid","this","data","show","smid","filepath","replay","elementId","filePath","decodeURIComponent","speed","loop","controllerId","alert","hide","stopReplay","getusers","change","courseid","val","call","methodname","args","json","context","tabledata","JSON","parse","render","then","html"],"mappings":"AAsBAA,8CAAO,CAAC,SAAU,YAAa,WAAY,iBAAkB,aAAa,SACtEC,EACAC,KACAC,IACAC,UACAC,cAEMC,gBAAkB,OACpBC,WAAa,CACbC,KAAM,SAAUC,MACZN,IACKO,YAAY,CACT,CAACC,IAAK,gBAAiBC,UAAW,kBAErCC,MAAK,WACFZ,EAAEa,UAAUC,OAAM,SAAUd,GACxBA,EAAE,eAAee,GAAG,SAAS,eACrBC,IAAMhB,EAAEiB,MAAMC,KAAK,MACvBlB,EAAE,IAAMgB,KAAKG,UAEjBnB,EAAE,cAAce,GAAG,SAAS,eACpBK,KAAOpB,EAAEiB,MAAMC,KAAK,MACxBlB,EAAE,IAAMoB,MAAMD,UAIlBnB,EAAE,wBAAwBe,GAAG,SAAS,eAE9BC,IAAMhB,EAAEiB,MAAMC,KAAK,MACnBG,SAAWrB,EAAEiB,MAAMC,KAAK,eACzBG,SAAS,CACZrB,EAAE,IAAMgB,KAAKG,aACPG,OAAS,IAAIlB,OACfmB,UAAY,UAAUP,IACtBQ,SAAWC,mBAAmBJ,UAC9BK,MAAQ,GACRC,MAAO,EACPC,aAAe,UAAYZ,KAE/BX,gBAAgBW,KAAOM,YAEnBO,MAAM,qBAGd7B,EAAE,iBAAiBe,GAAG,SAAS,WAC3Bf,EAAE,UAAU8B,WACRd,IAAMhB,EAAEiB,MAAMC,KAAK,MACnBb,gBAAgBW,OAChBX,gBAAgBW,KAAKe,oBACd1B,gBAAgBW,YAInCV,WAAW0B,SAASxB,UAIhCwB,SAAU,SAAUxB,MAChBR,EAAE,kBAAkBiC,QAAO,eACnBC,SAAWlC,EAAEiB,MAAMkB,MACRlC,KAAKmC,KAAK,CACrB,CACIC,WAAY,wBACZC,KAAM,CACFJ,SAAUA,aAIb,GAAGtB,MAAK,SAAU2B,UAEnBC,QAAU,CACVC,UAFOC,KAAKC,MAAMJ,MAGlB/B,KAAMA,MAEVL,UACKyC,OAAO,yBAA0BJ,SACjCK,MAAK,SAAUC,MAEQ9C,EAAE,gBACR8C,KAAKA,YAIhB7C,KAAKmC,KAAK,CACrB,CACIC,WAAY,0BACZC,KAAM,CACFJ,SAAUA,aAIb,GAAGtB,MAAK,SAAU2B,UAEnBC,QAAU,CACVC,UAFOC,KAAKC,MAAMJ,MAGlB/B,KAAMA,MAEVL,UACKyC,OAAO,2BAA4BJ,SACnCK,MAAK,SAAUC,MAEQ9C,EAAE,kBACR8C,KAAKA,wBAMpCxC"}