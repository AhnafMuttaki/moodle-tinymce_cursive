{"version":3,"file":"append_submissions_table.min.js","sources":["../src/append_submissions_table.js"],"sourcesContent":["/**\n * @module     tiny_cursive/plugin\n * @category TinyMCE Editor\n * @copyright  CTI <info@cursivetechnology.com>\n * @author kuldeep singh <mca.kuldeep.sekhon@gmail.com>\n */\n\ndefine([\"jquery\", \"core/ajax\", \"core/str\",\"core/templates\"], function (\n    $,\n    AJAX,\n    str,\n    templates\n  ) {\n    var usersTable = {\n      init: function (page) {\n        str\n          .get_strings([\n            { key: \"field_require\", component: \"tiny_cursive\" },\n          ])\n          .done(function () {\n            usersTable.appendTable(page);\n          });\n      },\n      appendTable: function (page) {\n        let h_tr=$('thead').find('tr').get()[0];\n        $(h_tr).find('th').eq(8).after('<th>Stats</th><th>TypeID</th>');\n        $('tbody').find( \"tr\" ).get().forEach(function(tr) {\n          let td_a=$(tr).find(\"td\").get()[8];\n          let a_id=$(td_a).find(\"a\").get()[0];\n          let td_user=$(tr).find(\"td\").get()[0];\n          let userid=$(td_user).find(\"input\").get()[0].value;\n          let parm = new URL($(a_id).attr('href'));\n          let cmid=parm.searchParams.get('id');\n          let thunder_icon='<td><a href=\"#\" data-id='+userid+' class=\"fa fa-bolt popup_item\" style=\"font-size:24px\"></a></td>';\n          $(tr).find('td').eq(8).after(thunder_icon);\n          let args={id: userid,modulename:\"assign\",cmid:cmid} ;\n          let methodname='cursive_user_list_submission_stats';\n          let com=AJAX.call([{ methodname ,args }]);\n          window.console.log(\"reached here\");\n          try {\n          com[0].done(function (json) {\n            var data = JSON.parse(json);\n          var score=data.score;\n          var icon='fa fa-close';\n          var color='font-size:36px;color:red';\n          if(score>0.65){\n              icon='fa fa-check-square';\n              color='font-size:36px;color:green';\n          }else if(score>=0.35){\n              icon='fa fa-question';\n              color='font-size:36px;color:orange';\n          }else{\n              icon='fa fa-close';\n              color='font-size:36px;color:red';\n            }\n          let close_icon='<td><a href=\"#\" class=\"'+icon+'\" style=\"'+color+';\"></a></td>';\n          $(tr).find('td').eq(9).after(close_icon);\n            var context = {\n              tabledata: data,\n              page: page,\n            };\n            templates\n              .render(\"tiny_cursive/pop_modal\", context)\n              .then(function (html,js) {\n                window.console.log(js);\n                $(tr).find('td').eq(9).after(html);\n              }).catch(e=>window.console.log(e));\n          });\n        } catch (error) {\n            window.console.log(error);\n          }\n          $(\".popup_item\").on('click',function () {\n            $(\".modal\").hide();\n            let mid =$(this).data('id');\n            window.console.log('userid'+mid);\n          $(\"#\"+mid).show();\n          });\n          $(window).on('click',function (e) {\n            if(e.target.id=='modal-close'+userid){\n              $(\"#\"+userid).hide();\n            }\n          });\n          return com.usercomment;\n        });\n      },\n    };\n    return usersTable;\n  });"],"names":["define","$","AJAX","str","templates","usersTable","init","page","get_strings","key","component","done","appendTable","h_tr","find","get","eq","after","forEach","tr","td_a","a_id","td_user","userid","value","cmid","URL","attr","searchParams","thunder_icon","args","id","modulename","com","call","methodname","window","console","log","json","data","JSON","parse","score","icon","color","close_icon","context","tabledata","render","then","html","js","catch","e","error","on","hide","mid","this","show","target","usercomment"],"mappings":"AAOAA,+CAAO,CAAC,SAAU,YAAa,WAAW,mBAAmB,SACzDC,EACAC,KACAC,IACAC,eAEIC,WAAa,CACfC,KAAM,SAAUC,MACdJ,IACGK,YAAY,CACX,CAAEC,IAAK,gBAAiBC,UAAW,kBAEpCC,MAAK,WACJN,WAAWO,YAAYL,UAG7BK,YAAa,SAAUL,UACjBM,KAAKZ,EAAE,SAASa,KAAK,MAAMC,MAAM,GACrCd,EAAEY,MAAMC,KAAK,MAAME,GAAG,GAAGC,MAAM,iCAC/BhB,EAAE,SAASa,KAAM,MAAOC,MAAMG,SAAQ,SAASC,QACzCC,KAAKnB,EAAEkB,IAAIL,KAAK,MAAMC,MAAM,GAC5BM,KAAKpB,EAAEmB,MAAMN,KAAK,KAAKC,MAAM,GAC7BO,QAAQrB,EAAEkB,IAAIL,KAAK,MAAMC,MAAM,GAC/BQ,OAAOtB,EAAEqB,SAASR,KAAK,SAASC,MAAM,GAAGS,MAEzCC,KADO,IAAIC,IAAIzB,EAAEoB,MAAMM,KAAK,SAClBC,aAAab,IAAI,MAC3Bc,aAAa,2BAA2BN,OAAO,kEACnDtB,EAAEkB,IAAIL,KAAK,MAAME,GAAG,GAAGC,MAAMY,kBACzBC,KAAK,CAACC,GAAIR,OAAOS,WAAW,SAASP,KAAKA,MAE1CQ,IAAI/B,KAAKgC,KAAK,CAAC,CAAEC,WADN,qCACkBL,KAAAA,QACjCM,OAAOC,QAAQC,IAAI,oBAEnBL,IAAI,GAAGtB,MAAK,SAAU4B,UAChBC,KAAOC,KAAKC,MAAMH,MACpBI,MAAMH,KAAKG,MACXC,KAAK,cACLC,MAAM,2BACPF,MAAM,KACLC,KAAK,qBACLC,MAAM,8BACDF,OAAO,KACZC,KAAK,iBACLC,MAAM,gCAEND,KAAK,cACLC,MAAM,gCAENC,WAAW,0BAA0BF,KAAK,YAAYC,MAAM,eAChE5C,EAAEkB,IAAIL,KAAK,MAAME,GAAG,GAAGC,MAAM6B,gBACvBC,QAAU,CACZC,UAAWR,KACXjC,KAAMA,MAERH,UACG6C,OAAO,yBAA0BF,SACjCG,MAAK,SAAUC,KAAKC,IACnBhB,OAAOC,QAAQC,IAAIc,IACnBnD,EAAEkB,IAAIL,KAAK,MAAME,GAAG,GAAGC,MAAMkC,SAC5BE,OAAMC,GAAGlB,OAAOC,QAAQC,IAAIgB,QAEnC,MAAOC,OACLnB,OAAOC,QAAQC,IAAIiB,cAErBtD,EAAE,eAAeuD,GAAG,SAAQ,WAC1BvD,EAAE,UAAUwD,WACRC,IAAKzD,EAAE0D,MAAMnB,KAAK,MACtBJ,OAAOC,QAAQC,IAAI,SAASoB,KAC9BzD,EAAE,IAAIyD,KAAKE,UAEX3D,EAAEmC,QAAQoB,GAAG,SAAQ,SAAUF,GAC1BA,EAAEO,OAAO9B,IAAI,cAAcR,QAC5BtB,EAAE,IAAIsB,QAAQkC,UAGXxB,IAAI6B,wBAIVzD"}