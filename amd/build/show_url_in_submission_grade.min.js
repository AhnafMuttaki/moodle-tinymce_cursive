define("tiny_cursive/show_url_in_submission_grade",["jquery","core/ajax","core/str","core/templates","./replay","./analytic_button","./analytic_events"],(function($,AJAX,str,templates,Replay,analyticButton,CustomEvents){const replayInstances={};window.myFunction=function(){let mid=$(this).data("id");$("#typeid"+mid).show()},window.video_playback=function(mid,filepath){if(""!==filepath){const replay=new Replay(elementId="content"+mid,filePath=filepath,speed=10,loop=!1,controllerId="player_"+mid);replayInstances[mid]=replay}else alert("No submission");return!1},window.popup_item=function(mid){$("#"+mid).show()};var usersTable={init:function(score_setting,showcomment){str.get_strings([{key:"field_require",component:"tiny_cursive"}]).done((function(){usersTable.appendSubmissionDetail(score_setting,showcomment)}))},appendSubmissionDetail:function(score_setting,showcomment){$(document).ready((function($){var divElement=$('.path-mod-assign [data-region="grade-panel"]')[0],previousContextId=window.location.href;new MutationObserver((function(mutations){mutations.forEach((function(mutation){var currentContextId=window.location.href;currentContextId!==previousContextId&&(window.location.reload(),previousContextId=currentContextId)}))})).observe(divElement,{childList:!0,subtree:!0});let sub_url=window.location.href,parm=new URL(sub_url),userid=parm.searchParams.get("userid"),cmid=parm.searchParams.get("id");let args={id:userid,modulename:"assign",cmid:cmid},com=AJAX.call([{methodname:"cursive_get_assign_grade_comment",args:args}]);return com[0].done((function(json){var data=JSON.parse(json);$(".alert").remove();var filepath="";data.data.filename&&(filepath=data.data.filename);var score=parseFloat(data.data.score);data.data.first_file?"fa  fa fa-solid fa-info-circle typeid":score>=score_setting?"fa fa-check-circle typeid":score<score_setting?"fa fa-question-circle typeid":"fa fa-circle-o typeid";let container=$("<div>"),row=$("<div>").addClass("row"),chatbox=$("<div>").addClass("tiny_cursive-chatbox tiny_cursive-chatbox22 tiny_cursive-chatbox--tray"),chatboxTitle=$("<div>").addClass("tiny_cursive-chatbox__title"),titleH5=$('<h5 class="text-white">').text("References");chatboxTitle.append(titleH5);let cbody=$("<div>").addClass("tiny_cursive-chatbox__body");chatbox.append(chatboxTitle,cbody),row.append(chatbox),container.append(row),$('div[data-region="grade-actions-panel"]').before(container);var $chatbox=$(".tiny_cursive-chatbox"),$chatboxTitle=$(".tiny_cursive-chatbox__title"),$chatboxTitleClose=$(".tiny_cursive-chatbox__title__close");$chatboxTitle.on("click",(function(){$chatbox.toggleClass("tiny_cursive-chatbox--tray")})),$chatboxTitleClose.on("click",(function(e){e.stopPropagation(),$chatbox.addClass("tiny_cursive-chatbox--closed")})),$chatbox.on("transitionend",(function(){$chatbox.hasClass("tiny_cursive-chatbox--closed")&&$chatbox.remove()})),"comments"!=data.usercomment&&parseInt(showcomment)&&$(document).ready((function(){$('div[data-region="grade-panel"]').append('<div class="dropdown">'),data.usercomment.forEach((element=>{cbody.append('<div class="border p-2 shadow-sm">'+element.usercomment+"</div>")}))}));let analytic_button_div=document.createElement("div");analytic_button_div.append(analyticButton(userid)),analytic_button_div.classList.add("text-center","mt-2"),$('div[data-region="grade-actions"]').before(analytic_button_div),$('div[data-region="review-panel"]').addClass("cursive_review_panel_path_mod_assign"),$('div[data-region="grading-navigation-panel"]').addClass("cursive_grading-navigation-panel_path_mod_assign"),$('div[data-region="grade-panel"]').addClass("cursive_grade-panel_path_mod_assign"),$('div[data-region="grade-actions-panel"]').addClass("cursive_grade-actions-panel_path_mod_assign");let myEvents=new CustomEvents;var context={tabledata:data.data,formattime:myEvents.formatedTime(data.data),page:score_setting,userid:userid};myEvents.createModal(userid,context),myEvents.analytics(userid,templates,context),myEvents.checkDiff(userid,data.data.file_id),myEvents.replyWriting(userid,filepath),templates.render("tiny_cursive/pop_modal",context).then((function(html){$("body").append(html)})).catch((e=>window.console.error(e)))})),$(window).on("click",(function(e){e.target.id=="modal-close"+userid&&$("#"+userid).hide(),e.target.id=="modal-close-playback"+userid&&($("#playback"+userid).hide(),replayInstances[userid]&&replayInstances[userid].stopReplay())})),com.usercomment}))}};return usersTable}));

//# sourceMappingURL=show_url_in_submission_grade.min.js.map