define("tiny_cursive/show_url_in_quiz_detail",["jquery","core/ajax","core/str","core/templates","./replay","./analytic_button","./analytic_events"],(function($,AJAX,str,templates,Replay,analyticButton,customEvents){const replayInstances={};window.myFunction=function(){let mid=$(this).data("id");$("#typeid"+mid).show()},window.video_playback=function(mid,filepath){if(""!==filepath){const replay=new Replay(elementId="content"+mid,filePath=filepath,speed=10,loop=!1,controllerId="player_"+mid);replayInstances[mid]=replay}else alert("No submission");return!1},window.popup_item=function(mid){$("#"+mid).show()};var usersTable={init:function(score_setting,showcomment){str.get_strings([{key:"field_require",component:"tiny_cursive"}]).done((function(){usersTable.appendSubmissionDetail(score_setting,showcomment)}))},appendSubmissionDetail:function(score_setting,showcomment){let sub_url=window.location.href,parm=new URL(sub_url),attempt_id=parm.searchParams.get("attempt"),cmid=parm.searchParams.get("cmid");if(!cmid){var firstHref=$('a[href*="question/bank/editquestion/question.php"]').first().attr("href");firstHref&&firstHref.length>0&&(cmid=firstHref.match(/cmid=(\d+)/)[1])}var userid="";$("table.generaltable.generalbox.quizreviewsummary tbody tr").each((function(){var href=$(this).find('a[href*="/user/view.php"]').attr("href");if(href){var id=href.match(/id=(\d+)/);id&&(userid=id[1])}}));$("#page-mod-quiz-review .info").each((function(){if((editQuestionLink=$(this).find('.editquestion a[href*="question/bank/editquestion/question.php"]')).length>0)var editQuestionLink,questionid=(editQuestionLink=editQuestionLink.attr("href")).match(/&id=(\d+)/)[1];let args={id:attempt_id,modulename:"quiz",cmid:cmid,questionid:questionid,userid:userid},com=AJAX.call([{methodname:"cursive_get_comment_link",args:args}]);return com[0].done((function(json){var data=JSON.parse(json);if(data.data.filename){var content=$('.que.essay .editquestion a[href*="question/bank/editquestion/question.php"][href*="&id='+data.data.questionid+'"]');if("comments"!=data.usercomment&&parseInt(showcomment)){content.parent().parent().parent().find(".qtext").append('<div class="dropdown">');var tt="";data.usercomment.forEach((element=>{tt+="<li>"+element.usercomment+"</li>"}));content.parent().parent().parent().find(".qtext").append('<div class="border alert alert-warning"><details><summary>Content Sources Provided by Student</summary> '+tt+"</details></div></div>")}var filepath="";data.data.filename&&(filepath=data.data.filename);var score=parseInt(data.data.score);data.data.first_file?("fa  fa fa-solid fa-info-circle typeid","font-size:24px;color:#000000"):score>=score_setting?("fa fa-check-circle typeid","font-size:24px;color:green"):score<score_setting?("fa fa-question-circle typeid","font-size:24px;color:#A9A9A9"):("fa fa-circle-o typeid","font-size:24px;color:black");let analytic_button_div=document.createElement("div");analytic_button_div.classList.add("text-center"),analytic_button_div.append(analyticButton(userid,questionid)),content.parent().parent().parent().find(".qtext").append(analytic_button_div);var context={tabledata:data.data,page:score_setting,userid:userid,quizid:questionid};let myEvents=new customEvents;myEvents.createModal(userid,context,questionid),myEvents.analytics(userid,templates,context,questionid),myEvents.checkDiff(userid,data.data.file_id,questionid),myEvents.replyWriting(userid,filepath,questionid),templates.render("tiny_cursive/quiz_pop_modal",context).then((function(html){$("body").append(html)})).catch((e=>window.console.error(e)))}})),$(window).on("click",(function(e){const targetId=e.target.id;targetId.startsWith("modal-close"+userid+"-"+questionid)&&$("#"+userid+"-"+questionid).hide(),targetId.startsWith("modal-close-playback"+questionid)&&($("#playback"+questionid).hide(),replayInstances[questionid]&&replayInstances[questionid].stopReplay())})),com.usercomment}))}};return usersTable}));

//# sourceMappingURL=show_url_in_quiz_detail.min.js.map