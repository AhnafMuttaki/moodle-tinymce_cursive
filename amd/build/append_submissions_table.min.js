define("tiny_cursive/append_submissions_table",["jquery","core/ajax","core/str","core/templates"],(function($,AJAX,str,templates){var usersTable={init:function(page){str.get_strings([{key:"field_require",component:"tiny_cursive"}]).done((function(){usersTable.appendTable(page)}))},appendTable:function(page){let h_tr=$("thead").find("tr").get()[0];$(h_tr).find("th").eq(8).after("<th>Stats</th><th>TypeID</th>"),$("tbody").find("tr").get().forEach((function(tr){let td_a=$(tr).find("td").get()[8],a_id=$(td_a).find("a").get()[0],td_user=$(tr).find("td").get()[0],userid=$(td_user).find("input").get()[0].value,cmid=new URL($(a_id).attr("href")).searchParams.get("id"),thunder_icon='<td><a href="#" data-id='+userid+' class="fa fa-bolt popup_item" style="font-size:24px"></a></td>';$(tr).find("td").eq(8).after(thunder_icon);let args={id:userid,modulename:"assign",cmid:cmid},com=AJAX.call([{methodname:"cursive_user_list_submission_stats",args:args}]);window.console.log("reached here");try{com[0].done((function(json){var data=JSON.parse(json),score=data.score,icon="fa fa-close",color="font-size:36px;color:red";score>.65?(icon="fa fa-check-square",color="font-size:36px;color:green"):score>=.35?(icon="fa fa-question",color="font-size:36px;color:orange"):(icon="fa fa-close",color="font-size:36px;color:red");let close_icon='<td><a href="#" class="'+icon+'" style="'+color+';"></a></td>';$(tr).find("td").eq(9).after(close_icon);var context={tabledata:data,page:page};templates.render("tiny_cursive/pop_modal",context).then((function(html,js){window.console.log(js),$(tr).find("td").eq(9).after(html)})).catch((e=>window.console.log(e)))}))}catch(error){window.console.log(error)}return $(".popup_item").on("click",(function(){$(".modal").hide();let mid=$(this).data("id");window.console.log("userid"+mid),$("#"+mid).show()})),$(window).on("click",(function(e){e.target.id=="modal-close"+userid&&$("#"+userid).hide()})),com.usercomment}))}};return usersTable}));

//# sourceMappingURL=append_submissions_table.min.js.map