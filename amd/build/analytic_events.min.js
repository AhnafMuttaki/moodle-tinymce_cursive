define("tiny_cursive/analytic_events",["exports","./analytic_modal","core/ajax"],(function(_exports,_analytic_modal,_ajax){var obj;
/**
   * TODO describe module analytic_events
   *
   * @module     tiny_cursive/analytic_events
   * @copyright  2024 YOUR NAME <your@email.com>
   * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
   */Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.default=void 0,_analytic_modal=(obj=_analytic_modal)&&obj.__esModule?obj:{default:obj};return _exports.default=class{createModal(userid,context){$("#analytics"+userid+(arguments.length>2&&void 0!==arguments[2]?arguments[2]:"")).on("click",(function(e){e.preventDefault(),_analytic_modal.default.create({templateContext:context}).then((modal=>{modal.show()})).catch((error=>{console.error("Failed to create modal:",error)}))}))}analytics(userid,templates,context){let questionid=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";$("body").on("click","#analytic"+userid+questionid,(function(e){e.preventDefault(),$(".active").removeClass("active"),$(this).addClass("active"),templates.render("tiny_cursive/analytics_table",context).then((function(html){$("#content"+userid).html(html)})).fail((function(error){console.error("Failed to render template:",error)}))}))}checkDiff(userid,fileid){let questionid=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",content=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"diff";const nodata=document.createElement("p");nodata.classList.add("text-center","p-5","bg-light","rounded","m-5","text-primary"),nodata.style.verticalAlign="middle",nodata.style.textTransform="uppercase",nodata.style.fontWeight="500",nodata.textContent="no data received yet",$("body").on("click","#diff"+userid+questionid,(function(e){if(e.preventDefault(),$(".active").removeClass("active"),$(this).addClass("active"),!fileid)throw $("#content"+userid).html(nodata),new Error("Missing file id or Difference Content not receive yet");(0,_ajax.call)([{methodname:"cursive_get_writing_differences",args:{fileid:fileid}}])[0].done((response=>{let responsedata=JSON.parse(response.data);responsedata[0]?(content=atob(responsedata[0].content),$("#content"+userid).html(content)):$("#content"+userid).html(nodata)})).fail((error=>{throw $("#content"+userid).html(nodata),new Error("Error loading JSON file: "+error.message)}))}))}replyWriting(userid,filepath){let questionid=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";$("body").on("click","#rep"+userid+questionid,(function(e){e.preventDefault(),$(".active").removeClass("active"),$(this).addClass("active"),video_playback(userid,filepath)}))}},_exports.default}));

//# sourceMappingURL=analytic_events.min.js.map